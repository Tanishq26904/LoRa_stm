/*
 * BE_Project.h
 *
 *  Created on: Jan 24, 2026
 *      Author: 22142
 */

#ifndef INC_BE_PROJECT_H_
#define INC_BE_PROJECT_H_

void flash_erase_node_page(void);
uint8_t flash_read_node_id(void);
void flash_save_node_id(uint8_t node_id);
uint32_t calculate_checksum(uint32_t counter, uint32_t device_id);
#ifdef USE_UART
	void printu(const char *msg);
	void print_dbg(const char *format, ...);
	void print_node_id(uint8_t nodeId);
	void print_reset_reason(void);
#endif
void STM32_GetUID(uint32_t uid[3]);
void req_Registration(void);
uint8_t wait_for_ack(uint16_t timeout_ms);
uint8_t LoRa_Transmit_ack(uint8_t type, uint8_t dst, uint8_t src, const char *payload, uint16_t msg_id);
uint8_t LoRa_Transmit(uint8_t type, uint8_t dst, uint8_t src, const char *payload, uint16_t msg_id);
void LoRa_StartPollingnode(void);
void handle_req_data(uint8_t src_id, uint16_t msg_id);
void flash_clear_storage(void);
void check_clear_button(void);
uint8_t isDuplicate(uint8_t src, uint16_t msg_id);
void rememberPacket(uint8_t src, uint16_t msg_id);
uint8_t parse_REQ_DATA(const char *rx, uint8_t *dst, uint8_t *src);
void check_radio_health(void);
void reset_watchdog(void);
void check_watchdog(void);
void hard_reset_radio(void);
uint8_t check_radio_status(void);
uint8_t wait_for_tx_complete(void);

static uint32_t lcg_rand(void);
static float rand_range(float min, float max);

#endif /* INC_BE_PROJECT_H_ */
